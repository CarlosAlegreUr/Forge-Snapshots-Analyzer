# ForgeSnapshotsAnalyzer

Some bash scripts to compare and analyze snapshots created using forge snapshot.

# ðŸš§ REPO IN CONTRUCTION ðŸš§

### ðŸ“‘ Bash Scripts, and Usage Guide

<details>
  <summary>ðŸš€ How to run the bash scripts </summary>

### How to use the bash scripts

The results were calculated utilizing the provided bash scripts and snapshot results:

```
./compare-gas-snapshots.sh .gas-snapshot-optimization .gas-snapshot-original
```

This saves the results in a file named: .snapshot-compare-results.

Now run:

```
./analyze-gas-results.sh .snapshot-compare-results
```

Ensure you run these scripts in the directory containing the snapshots. Additionally, grant execution permissions if they aren't set. On Linux, use the `chmod` command:

```
chmod +x compare-gas-snapshots.sh
```

</details>

<details>
  <summary>ðŸ”§ The bash scripts </summary>

### Bash Scripts

_**`compare-gas-snapshots.sh`**_

For each row in the snapshot, it compares the (gas: `number`) with the respective row in the second snapshot file. If a fuzz test is presented, it takes the value from the Î¼: `Number`. If an invariant test is deteced, as in forge so far they dont have gas consumption details they have to be deleted manually. Future updates to the scripts will automate this process.

_**`analyze-gas-results.sh`**_

It's meant to be executed on the resulting file generated by the previous bash script.

It calculates 3 numbers:

- The cumsum of the last column. (gas saved, or not, in each test)
- The cumsum of the previous to last column. (original gas consumption)
- gasSaved / originalConsumption \* 100

Lastly prints in the terminal the total gas saved and the percentage it represents on the original gas consumption.

</details>
